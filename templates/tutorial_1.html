{% extends "tutorial_layout.html" %}
{% block body %}
<h3>Understanding the HTTP Request</h3>

<p>Congratulations, </p>
<p>By seeing this page you have successfully sent an HTTP 'GET' request to '{{request.host+request.path}}' and the web server responded with this page. We will explore what that means below.</p>

<p>For anyone who does not know, let's define a few terms before going forward.</p>
<ul>
  <li><strong>Hypertext:</strong>
    A document displayed on a computer that has links to other documents and supports embedding resources like pictures. Web pages are the most common example of Hypertext.
  </li>
  <li><strong>Hypertext Markup Language (HTML):</strong>
    A set of symbols and words that form a language for describing the structure of a hypertext document (webpage). For example, to make something bold in HTML we can write &lt;strong&gt;something bold&lt;/strong&gt;. Web browsers read HTML, interpret these 'tags' and build the web page to display to us.
  </li>
  <li><strong>Hypertext Transfer Protocol (HTTP):</strong>
    A protocol to send hypertext documents between two computers (usually a client and a server). As the name implies, HTTP was primarily made for transferring HTML; however other types of data can be transferred. This is why most URLs start with 'http://', it tells the web browser what protocol to talk to the server with.
  </li>
</ul>

<h3>HTTP GET, you use it all the time.</h3>

<p>
  From these definitions and years of using a web browser, it is
  hopefully clear what I mean when I say you made a http request (tried
  to load a web page) and got a response (the page loaded). The
  potentially new idea is the 'HTTP Method'. The 'method' is just a word
  sent to the server with every HTTP request, along with the URL. You
  can think of it as what to do with the url. For now we will stick with
  one method type: 'GET'. GET simply means 'send me back the resource
  specified by the URL.'
</p>

<p>
  Every time you type a website URL into your address bar and hit
  enter (or otherwise navigate to a web page) you are sending an HTTP
  GET request to a server. If you get anything back besides 'timeout'
  or 'host not found' then you received an HTTP response from the
  server. Even errors like '404 file not found' are responses from the
  server; the server told you it does not have that file. Messages
  like 'Unable to Connect', or 'Server Unavailable' are messages from
  your browser saying the server did not answer.
</p>

<h3>Required Details About HTTP</h3>

<p>
  HTTP Messages look like a text file with different fields in each
  line.  Messages in http can contain three parts: A
  single <strong>Request or Response Line</strong>, zero or
  more <strong>Headers</strong> (one line per), and an
  optional <strong>Body</strong>(any format).
</p>
<ul>
  <li>
    The <strong>Request Line</strong> simply lists the HTTP Method,
    the URL, and the HTTP protocol version (1.1). The Request Line is
    only used in HTTP Requests, it is required, and is the first line
    of the message. It looks like this:
    
    <pre><code>GET /tutorial/1 HTTP/1.1</code></pre>
    
    Notice that in the Request Line, the URL does not include the
    server's domain name (like www.google.com), nor the http:// we
    come to expect. These pieces of information are implied by the
    fact we are sending an HTTP request to that server over TCP.
  </li>

  <li>
    The <strong>Response Line</strong> is the first line of all HTTP
    Response messages and is required. It lists the HTTP version used,
    a status code (like 200, 404, 500, etc), and a short message (like
    'OK', 'Forbidden', etc) which is unnecessary because it can be
    determined by the status code.
  </li>
  
  <li>
    <strong>Headers</strong> are metadata. They contain details about
    the message but not the actual payload of the message
    itself. Headers can be used both by a Request message to describe
    itself to the server, and the Response message to describe itself
    to the client. You will see these used for lots of things.
  </li>
  
  <li>
    The <strong>Message Body</strong> is the actual data we are
    interested in sending (if any). Remember that both the Request and
    Response of an HTTP transaction can have a Message Body. 
  </li>
</ul>

<p>
  Request Message bodies are used when you fill out a form online or
  upload a picture to social media. In the more common case, we simply
  ask a server for a resource. Such requests can be accomplished by
  only sending a Request Line to the server.
</p>

<p>
  In an HTTP Responses, the Message Body is the content the server is
  sending to you. Often it is HTML or media data. The Headers are used
  to specify the format of the body (is it html, a gif image, a video,
  etc).
</p>

<h3>Your Browser and HTTP</h3>
<p>
  After your browser sent the HTTP request to load this page, it got
  back an HTTP response. The browser checked the headers of the
  response and saw that the Response's Message Body was supposed to
  contain HTML. Next, the browser grabbed the Response's Message Body
  and interpreted it as html to build the page you see before you.
</p>

<p>
  We know what this page looks like when rendered as a Hypertext
  document in your browser, but we can see the raw HTML of this page
  that was sent from the server. To view the HTML of this
  page <em class="tut_action">Press CTRL+U in your browser (âŒ˜+U in
  Mac)</em>. This is purely to show you what the HTML looks like and
  how to get to it. There is nothing else in the HTML view I want you
  to look for. Spend as much or as little time as you want looking at
  the HTML. When you are done looking, feel free to close the HTML
  view and continue viewing the rendered page.
</p>

<p>
  Viewing the HTML of the page only shows the Response Message
  Body. If we want to view the Headers of the request or the response
  we will have to look somewhere else.

  Most modern browsers allow you to inspect HTTP transactions and see
  Header data. To view the metadata (headers) of HTTP messages in your
  browser, we will need to use the aptly
  named <strong>Inspecter</strong>. With it we can view details of
  every HTTP messages that passes through your browser.
</p>

<p>
  If you are in Firefox or Google Chrome, <em class="tut_action">hit
  the F12 key (Command+Option+I on mac)</em> to open up the Inspector
  pane. The Inspecter pane should appear in the bottom of your
  browser, but it may appear on the side or in a
  popup. <em class="tut_action">Click the <strong>Network</strong>
  tab</em> to open the Network Inspecter.
</p>

<p>
  The Network Inspecter will be blank. The Network Inspecter has to be
  enabled when HTTP traffic occurs to log it, so it did not catch when
  you loaded this page  the first time. <em class="tut_action">Refresh
  this page</em> so the inspecter can log the messages. Once that is
  done you should see something like the following image (You might want to
  open the image in a new tab):
</p>
<a href="/static/tutorial_1_inspector.png"><img src="/static/thumb.tutorial_1_inspector.png"/></a>

<p>In the network inspector you should be able to see four requests for this page.</p>
<ul>
  <li><strong>1</strong> - The HTML for this page</li>
  <li><strong>style.css</strong> - Style sheet information to make things look pretty (red font on instructions)</li>
  <li><strong>thumb.tutorial_1_inspector.png</strong> - The previous image</li>
  <li><strong>thumb.tutorial_1_inspector_details.png</strong> - The Next image</li>
</ul>
<p>
  The presence of 4 requests may seem odd, after all we only loaded
  one web page. But the page we loaded was html! Hypertext documents
  can link to other resources (images, etc) and the browser will go
  get them for the page. The server does not send you all the
  resources at once. The browser goes and fetches each resource which
  allows a page to be made of resources from multiple web servers. (If
  you want to view the HTML that produced the page you can at any time
  by pressing CTRL+U.)
</p>

<p>
  It may seem counter intuitive, but the webserver does not send all
  the images at the same time it sends the page. The browser is
  responsible for determining what additional resources the HTML file
  needs and then fetching each of them.
</p>

<p>
  Clicking any of the entries in the the Network Inspecter will show
  more details about that request. Go ahead
  and <em class="tut_action">click the entry labeled '1'</em>. (Note
  that the entry appears as '1' because that is the last part of the
  URL.) The Inspecter should look like this.
</p>
<a href="/static/tutorial_1_inspector_details.png"><img src="/static/thumb.tutorial_1_inspector_details.png"/></a>

<p>
  In the header's tab for the request we see information for General,
  Response Headers, and Request Headers. This data is the parsed
  headers. <em class="tut_action">Read over the headers</em> to see
  what type of data is sent with each message. Note that though Status
  Code appears in General, it is actually part of the Response Header,
  just as the URL and HTTP Method are really part of the Request
  header. They are just always there so they get pulled into their own
  listing.
</p>
<p>
  You should be able to see headers like "Content-Type" which tells
  the browser the format of the data being sent. If you check the
  "Content-Type" of one of the images that were transferred, you will
  see it has a different value. There is a header in Response for
  "Server", and a header in Request called "User-Agent"; These contain
  the name of the server's software (This site is running in a server
  called Werkzeug) and the name of your browser respectively.
</p>

<p>
  Headers can be named anything. But certain software expects there to
  be certain entries for things to work properly. We can also put a
  nearly unlimited number of header entries in each message, though in
  practice there are only several.
</p>

<p>
  Lastly, clicking on the Preview tab for request '1' will show you
  the html that was sent. The preview tab for images will show the
  image preview.
</p>

<h3>CLOSING</h3>
<p>
  Hopefully this page has shed some light on the inner workings of the
  common act of opening a web page.
</p>
<p>You should have a basic grasp on:</p>
<ul>
  <li>HTTP transactions are a Request and a Response.</li>
  <li>Headers describe data about the document being requested or returned.</li>
  <li>How to view header information through your browser.</li>
</ul>

{% include "tutorial_nav.html" %}

{% endblock %}
